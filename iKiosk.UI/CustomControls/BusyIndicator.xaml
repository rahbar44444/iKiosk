<UserControl x:Class="iKiosk.UI.CustomControls.BusyIndicator"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="150" Width="150"
             >
    <Grid Background="Transparent">
        <!-- Rotation group -->
        <Grid x:Name="RotateContainer"
              HorizontalAlignment="Center"
              VerticalAlignment="Center"
              Width="100" Height="100">
            <Grid.RenderTransform>
                <RotateTransform x:Name="SpinnerRotate" CenterX="50" CenterY="50"/>
            </Grid.RenderTransform>

            <!-- Outer white ring -->
            <Ellipse Width="100" Height="100"
                     Stroke="White"
                     StrokeThickness="8"
                     />

            <!-- Inner circle (creates ring gap) -->
            <Ellipse Width="70" Height="70"
                     Fill="{x:Null}"
                     Stroke="White"
                     StrokeThickness="8"
                     />

            <!-- Rotating orange arc -->
            <Path Stroke="#FF6A00"
                  StrokeThickness="7"
                  StrokeStartLineCap="Round"
                  StrokeEndLineCap="Round">
                <Path.Data>
                    <PathGeometry>
                        <!-- this arc defines the visible orange segment -->
                        <PathFigure StartPoint="50,10">
                            <ArcSegment Point="90,50"
                                        Size="40,40"
                                        IsLargeArc="False"
                                        SweepDirection="Clockwise" />
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
            </Path>
        </Grid>

        <!-- Text below -->
        <TextBlock Text="Processing..."
                   Foreground="White"
                   FontSize="18"
                   FontWeight="SemiBold"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Bottom"
                   Margin="5,5,0,0"/>

        <!-- Smooth infinite rotation -->
        <Grid.Triggers>
            <EventTrigger RoutedEvent="Loaded">
                <BeginStoryboard>
                    <Storyboard RepeatBehavior="Forever">
                        <DoubleAnimation
                            Storyboard.TargetName="SpinnerRotate"
                            Storyboard.TargetProperty="Angle"
                            From="0" To="360"
                            Duration="0:0:1.4"
                            RepeatBehavior="Forever"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Grid.Triggers>
    </Grid>
</UserControl>
